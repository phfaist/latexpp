# latexpp config file template.
#
# This is YAML syntax -- google "YAML tutorial" to get a quick intro.  Careful
# with spaces, correct indentation is important.

# the master LaTeX document -- this file will not be modified, all output will
# be produced in the output_dir
fname: 'macroscopic.tex'

# output file(s) will be created in this directory, originals will not be
# modified
#output_dir: '_latexpp_output'

# specify list of fixes to apply, in the given order
fixes:

  # replace \input{...} directives by the contents of the included file
  - name: 'latexpp.fixes.input.EvalInput'

  # remove all comments
  - name: 'latexpp.fixes.comments.RemoveComments'
    config:
      leave_percent: false

  - name: 'latexpp.fixes.preamble.AddPreamble'
    config:
      preamble: |
        \usepackage{mathrsfs}
        \usepackage{dsfont}

  - name: 'latexpp.fixes.usepackage.RemovePkgs'
    config:
      pkglist: ['phfnote', 'phfparen', 'phfqit']

  # copy any style files (.sty) that are used in the document and that
  # are present in the current directory to the output directory
  - name: 'latexpp.fixes.usepackage.CopyLocalPkgs'

  # copy figure files to the output directory and rename them fig-1.xx,
  # fig-2.xx, etc.
  - name: 'latexpp.fixes.figures.CopyAndRenameFigs'

  # Replace \bibliography{...} by \input{xxx.bbl} and copy the bbl file to the
  # output directory.  Make sure you run (pdf)latex on the main docuemnt
  # before running latexpp
  - name: 'latexpp.fixes.bib.CopyAndInputBbl'

  - name: 'latexpp.fixes.bib.ApplyAliases'
    config:
      bibalias_defs_search_files:
      - macroscopic.tex
      - bibolamazi_dup_aliases.tex
      - bib/more_bibaliases.tex

  - name: 'latexpp.fixes.pkg.phfqit.ExpandQitObjects'
    config:
      qitobjdef: [stdset]
      DSym: S
      HSym: S
      qitobjs:
        Dminz:
          type: Dbase
          sub: '\mathrm{min}'
        DKL:
          type: DD

  - name: 'latexpp.fixes.pkg.phfqit.ExpandMacros'
    config:
      #subst_use_hspace: false
      ops:
        eig: eig
        Var: Var

  - name: 'latexpp.fixes.pkg.phfparen.Expand'

  - name: 'latexpp.fixes.macro_subst.Subst'
    config:
      macros:
        #phfMakeCommentingCommand:
        #  argspec: '[{'
        #  repl: '' # ignore
        iid: 'i.i.d.\@'
        #phf:
        #  argspec: '{'
        #  repl: '\textcolor{red}{%(1)s}'


  # create a ZIP file with all the processed files.  Keep this rule last.
  - name: 'latexpp.fixes.archive.CreateArchive'
    config:
      use_root_dir: false
      archive_type: zip
